<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Para Gabriela üíñ</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap');

  /* Reset b√°sico */
  * {
    margin: 0; padding: 0; box-sizing: border-box;
  }

  body {
    font-family: Arial, sans-serif;
    background-color: #ffe6f0; /* rosa clarinho inicial */
    color: #222;
    min-height: 100vh;
    padding: 1rem;
    transition: background-color 1.5s ease;
    overflow-x: hidden;
    position: relative;
  }

  header {
    font-family: 'Dancing Script', cursive;
    font-size: 2.5rem;
    text-align: center;
    margin-bottom: 0.2rem;
    user-select: none;
  }

  #topoInfo {
    display: flex;
    justify-content: center;
    gap: 1.5rem;
    font-size: 1.1rem;
    margin-bottom: 1rem;
    user-select: none;
    flex-wrap: wrap;
  }

  #datetime, #clima {
    display: flex;
    align-items: center;
  }

  #clima img {
    width: 24px;
    height: 24px;
    margin-left: 0.3rem;
  }

  #painelFrases {
    max-width: 700px;
    background: white;
    border-radius: 15px;
    padding: 1.5rem;
    margin: 0 auto 1.5rem auto;
    box-shadow: 0 0 12px rgba(179,58,108,0.2);
    border: 1px solid #f3c9dc;
    color: black;
    line-height: 1.4;
    font-size: 1.2rem;
    user-select: none;
    min-height: 100px;
    position: relative;
    overflow: hidden;
  }

  #textoFofo {
    font-style: italic;
    margin-bottom: 1rem;
    text-align: center;
  }

  #contador {
    font-weight: bold;
    text-align: center;
    margin-bottom: 1rem;
  }

  /* √Årea de coment√°rios */
  #comentarios {
    max-width: 700px;
    margin: 0 auto 3rem auto;
  }

  #comentarios h3 {
    font-family: 'Dancing Script', cursive;
    text-align: center;
    margin-bottom: 1rem;
  }

  #formComentario {
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
  }

  #formComentario textarea {
    resize: vertical;
    min-height: 60px;
    border-radius: 10px;
    border: 1px solid #f3c9dc;
    padding: 0.6rem;
    font-size: 1rem;
  }

  #formComentario button {
    background: #b33a6c;
    color: white;
    border: none;
    padding: 0.8rem;
    font-size: 1.1rem;
    border-radius: 15px;
    cursor: pointer;
    user-select: none;
  }
  #formComentario button:hover {
    background: #e754a1;
  }

  #listaComentarios {
    margin-top: 1rem;
    max-height: 250px;
    overflow-y: auto;
    border: 1px solid #f3c9dc;
    border-radius: 10px;
    padding: 0.7rem;
    background: #fff0f6;
  }

  .comentarioItem {
    background: white;
    padding: 0.6rem;
    border-radius: 10px;
    margin-bottom: 0.5rem;
    box-shadow: 0 1px 4px rgba(179,58,108,0.15);
    font-size: 0.95rem;
    line-height: 1.3;
    position: relative;
  }
  .respostaItem {
    background: #fce4ec;
    margin-left: 1rem;
    font-style: italic;
    font-size: 0.9rem;
    color: #880e4f;
  }

  /* Anima√ß√µes estrelas e cora√ß√µes */
  .estrela, .coracao {
    position: fixed;
    pointer-events: none;
    animation-timing-function: ease-out;
    user-select: none;
  }

  .estrela {
    color: #ffd700;
    font-size: 18px;
    animation-name: flutuar;
    animation-duration: 4s;
  }

  .coracao {
    color: #f06292;
    font-size: 22px;
    animation-name: subir;
    animation-duration: 3.5s;
  }

  @keyframes flutuar {
    0% {transform: translateY(0) scale(1); opacity: 1;}
    100% {transform: translateY(-100px) scale(0.3); opacity: 0;}
  }
  @keyframes subir {
    0% {transform: translateY(0) scale(1); opacity: 1;}
    100% {transform: translateY(-130px) scale(0.4); opacity: 0;}
  }

</style>
</head>
<body>

<header id="saudacao">Ol√°, Gabriela!</header>

<div id="topoInfo">
  <div id="datetime">Carregando data/hora...</div>
  <div id="clima">üå§Ô∏è --¬∞C</div>
</div>

<div id="painelFrases">
  <div id="textoFofo">Pensando em voc√™, Gabriela... sempre com um sorriso! üòä</div>
  <div id="contador">Pr√≥ximo texto em: --:--:--</div>
</div>

<div id="comentarios">
  <h3>Deixe seu recadinho üíå</h3>
  <form id="formComentario">
    <textarea id="novoComentario" placeholder="Escreva algo fofo, engra√ßado ou um emoji..."></textarea>
    <button type="submit">Enviar</button>
  </form>
  <div id="listaComentarios"></div>
</div>

<audio id="audioPlayer" loop volume="0.05" autoplay>
  <source src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_3f8fcd8e3c.mp3?filename=relaxing-acoustic-guitar-ambient-10881.mp3" type="audio/mpeg">
  Seu navegador n√£o suporta √°udio.
</audio>

<script>
  // Fontes, frases e cores para fundo
  const frases = [
    const frases = [
  "Gabriela, voc√™ √© o motivo do meu sorriso bobo no meio da rotina chata.",
  "Pensei em voc√™ agora, e quase derrubei o caf√© de tanto que sorri sozinho.",
  "Se pensar em voc√™ fosse esporte, eu j√° teria medalha de ouro.",
  "Sua risada √© meu som favorito, mesmo que s√≥ na minha cabe√ßa agora.",
  "Tem dias que o melhor plano √© s√≥ lembrar do seu jeito de ser e seguir.",
  "Quando a vida aperta, √© voc√™ que vem dar aquela paz meio doida.",
  "Nem precisava, mas voc√™ faz meu dia mais interessante s√≥ de existir.",
  "Se eu pudesse, mandava um abra√ßo quentinho agora pra voc√™ ‚Äì t√° valendo o pensamento mesmo.",
  "Voc√™ √© tipo aquela m√∫sica que fica grudada e faz o dia valer a pena.",
  "Pensar em voc√™ √© meu passatempo preferido, e olha que tem muita coisa pra fazer."
];
  
  // Cores para o fundo, menos verde escuro
  const coresFundo = ['#ffe6f0', '#fff0f6', '#fff5f8', '#fce4ec', '#f8bbd0', '#f48fb1', '#f06292', '#ec407a', '#e91e63', '#d81b60', '#c2185b', '#ad1457', '#880e4f'];
  
  // Fun√ß√£o que detecta se a cor √© escura pra mudar a cor da letra
  function corEhEscura(hex) {
    // Retira #
    hex = hex.replace('#', '');
    const r = parseInt(hex.substring(0,2),16);
    const g = parseInt(hex.substring(2,4),16);
    const b = parseInt(hex.substring(4,6),16);
    // Luminosidade relativa padr√£o
    const luminancia = 0.299*r + 0.587*g + 0.114*b;
    return luminancia < 140;
  }

  // Atualiza fundo e cor do texto
  function atualizarFundoTexto() {
    let cor = coresFundo[Math.floor(Math.random()*coresFundo.length)];
    document.body.style.backgroundColor = cor;
    if(corEhEscura(cor)) {
      document.body.style.color = '#eee';
      painel.style.color = '#eee';
    } else {
      document.body.style.color = '#222';
      painel.style.color = '#222';
    }
  }

  // Sauda√ß√£o cursiva conforme hor√°rio
  function saudacao() {
    const header = document.getElementById('saudacao');
    const now = new Date();
    const h = now.getHours();
    let texto;
    if(h>=5 && h<12) texto = 'Bom dia, Gabriela!';
    else if(h>=12 && h<18) texto = 'Boa tarde, Gabriela!';
    else texto = 'Boa noite, Gabriela!';
    header.textContent = texto;
  }

  // Data e hora
  function dataHora() {
    const dt = document.getElementById('datetime');
    const now = new Date();
    dt.textContent = now.toLocaleString('pt-BR', { dateStyle:'full', timeStyle:'medium' });
  }

  // Pega clima pela API do OpenWeatherMap (Brasil/Sao Paulo como padr√£o)
  async function pegarClima() {
    const climaDiv = document.getElementById('clima');
    try {
      // Pra exemplo sem chave, pegando pela localiza√ß√£o ip pode n√£o funcionar, ent√£o colocarei SP fixo
      // Pode trocar para cidade desejada ou implementar geolocaliza√ß√£o depois
      const apiKey = 'fa2a00e1098f18e06f7733d74616272c'; // chave gratuita, teste, pode trocar
      const url = `https://api.openweathermap.org/data/2.5/weather?q=S√£o Paulo,BR&units=metric&lang=pt_br&appid=${apiKey}`;
      const res = await fetch(url);
      const data = await res.json();
      const icon = data.weather[0].icon;
      const temp = Math.round(data.main.temp);
      const desc = data.weather[0].description;
      const iconeUrl = `https://openweathermap.org/img/wn/${icon}.png`;
      climaDiv.innerHTML = `${desc} ${temp}¬∞C <img src="${iconeUrl}" alt="${desc}"/>`;
    } catch(e) {
      climaDiv.textContent = 'Clima indispon√≠vel üå§Ô∏è';
    }
  }

  // Mostrar frases 3x por dia: manh√£(8h), tarde(15h), noite(21h)
  const horarios = [8,15,21];
  function proximoHorario() {
    const now = new Date();
    for(let h of horarios) {
      if(now.getHours() < h) return h;
    }
    return horarios[0] + 24; // amanh√£ cedo
  }

  // Mostrar frase atual conforme hor√°rio e contagem regressiva
  function atualizarFraseEContador() {
    const now = new Date();
    const painel = document.getElementById('painelFrases');
    const textoFofo = document.getElementById('textoFofo');
    const contador = document.getElementById('contador');

    let idx = horarios.findIndex(h => now.getHours() < h);
    if(idx === -1) idx = 0;

    // Exibir frase
    textoFofo.textContent = frases[idx];

    // Atualizar fundo e cor texto
    atualizarFundoTexto();

    // Contagem regressiva pro pr√≥ximo hor√°rio
    const proxHora = proximoHorario();
    let proxData = new Date(now);
    if(proxHora >= 24) {
      proxData.setDate(now.getDate() +1);
      proxData.setHours(horarios[0],0,0,0);
    } else {
      proxData.setHours(proxHora,0,0,0);
    }

    let dif = proxData - now;
    if(dif < 0) dif = 0;

    let segs = Math.floor(dif / 1000);
    let h = Math.floor(segs / 3600);
    segs %= 3600;
    let m = Math.floor(segs / 60);
    let s = segs % 60;

    contador.textContent = `Pr√≥ximo texto em: ${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
  }

  // Anima√ß√µes de estrelas e cora√ß√µes na abertura
  function criarEstrela() {
    const estrela = document.createElement('div');
    estrela.classList.add('estrela');
    estrela.textContent = '‚≠ê';
    estrela.style.left = Math.random() * window.innerWidth + 'px';
    estrela.style.top = window.innerHeight + 'px';
    estrela.style.animationDuration = (3 + Math.random()*3) + 's';
    document.body.appendChild(estrela);
    setTimeout(() => estrela.remove(), 3500);
  }
  function criarCoracao() {
    const coracao = document.createElement('div');
    coracao.classList.add('coracao');
    coracao.textContent = 'üíñ';
    coracao.style.left = Math.random() * window.innerWidth + 'px';
    coracao.style.top = window.innerHeight + 'px';
    coracao.style.animationDuration = (2 + Math.random()*2) + 's';
    document.body.appendChild(coracao);
    setTimeout(() => coracao.remove(), 3200);
  }
  function iniciarAnimacoes() {
    for(let i=0; i<15; i++) {
      setTimeout(criarEstrela, i*200);
      setTimeout(criarCoracao, i*350);
    }
  }

  // Coment√°rios (localStorage simples)
  const formComentario = document.getElementById('formComentario');
  const listaComentarios = document.getElementById('listaComentarios');

  function salvarComentario(texto) {
    const comentarios = JSON.parse(localStorage.getItem('comentariosGabriela')||'[]');
    comentarios.push({texto, data: new Date().toISOString()});
    localStorage.setItem('comentariosGabriela', JSON.stringify(comentarios));
  }

  function carregarComentarios() {
    listaComentarios.innerHTML = '';
    const comentarios = JSON.parse(localStorage.getItem('comentariosGabriela')||'[]');
    comentarios.forEach(c => {
      const div = document.createElement('div');
      div.classList.add('comentarioItem');
      div.textContent = c.texto;
      listaComentarios.appendChild(div);
    });
  }

  formComentario.addEventListener('submit', e => {
    e.preventDefault();
    const texto = formComentario.novoComentario.value.trim();
    if(!texto) return alert('Escreva algo fofo pra enviar üíñ');
    salvarComentario(texto);
    carregarComentarios();
    formComentario.reset();
  });

  // M√∫sica: autoplay e baixinha
  const audio = document.getElementById('audioPlayer');
  audio.volume = 0.05;
  audio.play().catch(()=>{ /* bloqueio autoplay do browser */ });

  // Inicializa√ß√µes
  const painel = document.getElementById('painelFrases');

  function atualizarTudo() {
    saudacao();
    dataHora();
    pegarClima();
    atualizarFraseEContador();
  }

  atualizarTudo();
  setInterval(atualizarTudo, 1000);

  iniciarAnimacoes();
  carregarComentarios();

</script>

</body>
</html>
